root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting# sudo bash cleanup.sh
Removing unnecessary files...
Fixing duplicate routing table entries...
Routing tables fixed
Cleanup complete
root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting# sudo bash nat-proxy-routing.sh
===== NAT-Based Transparent Proxy Routing Setup =====
Date: Thu Mar 27 22:56:15 IST 2025
Step 1: Setting up MikroTik connection...
Testing connectivity...
✓ MikroTik router is reachable
Step 2: Resolving API target...
✓ api.ipify.org resolved to 104.26.12.205
Step 3: Enabling IP forwarding...
net.ipv4.ip_forward = 1
Step 4: Clearing existing NAT rules...
Step 5: Setting up NAT-Based Transparent Proxy...
✓ NAT-Based Transparent Proxy configured
Step 6: Enabling proxy ARP...
Enabled proxy_arp on tun0
Step 7: Flushing routing cache...
Step 8: Creating MikroTik configuration...
✓ MikroTik configuration saved to mikrotik-router-commands.txt

===== NAT-Based Transparent Proxy Routing Setup Complete =====

IMPORTANT STEPS TO MAKE IT WORK:

1. Copy and paste each MikroTik command ONE BY ONE:
   - Open the file: mikrotik-router-commands.txt
   - Copy and paste each command SEPARATELY into your MikroTik terminal

2. Restart OpenVPN service:
   sudo systemctl restart openvpn

3. Test if it's working:
   ./test-api-routing.sh

If it still shows the VPN server's IP (176.222.55.126),
make sure you've correctly entered ALL MikroTik commands.

This NAT-Based Transparent Proxy Routing technique bypasses
the 'Nexthop has invalid gateway' error by using NAT instead of routing.

root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting#  sudo systemctl restart openvpn
root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting# ./test-api-routing.shsudo systemctl restart openvpn^C
root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting# ^C
root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting# sudo systemctl restart openvpn
root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting# ./test-api-routing.sh
===== Testing API Routing =====
Making 5 requests to http://api.ipify.org?format=json

Request 1: {"ip":"176.222.55.126"}
Request 2: {"ip":"176.222.55.126"}
Request 3: {"ip":"176.222.55.126"}
Request 4: {"ip":"176.222.55.126"}
Request 5: {"ip":"176.222.55.126"}
root@itguy-Zeroxbit:/home/itguy/vpn/OpenVpn-Server/apiRouting#